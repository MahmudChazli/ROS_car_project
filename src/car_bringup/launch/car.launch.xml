<launch>
  <let name="xacro_path"
       value="$(find-pkg-share car_description)/xacro/main.xacro"/>

  <let name="rviz_config_path" 
       value="$(find-pkg-share car_bringup)/rviz/xacro_config.rviz"/>

  <node pkg="robot_state_publisher" exec="robot_state_publisher">
    <param name="robot_description" value="$(command 'xacro $(var xacro_path)')"/>
  </node>

  <node pkg="gazebo_ros" exec="spawn_entity.py"
        args="-topic robot_description -entity my_robot_v2"/>

  <executable cmd="gzserver -s libgazebo_ros_init.so -s libgazebo_ros_factory.so 
                  --verbose worlds/empty.world" output="screen"
  />


  <executable cmd="gzclient" output="screen"/>

  
  <!-- <include file="$(find-pkg-share gazebo_ros)/launch/gazebo.launch.py">
    <arg name="world"
        value="$(find-pkg-share car_bringup)/worlds/test_world.world"/>
  </include>  -->

  <node pkg="rviz2" exec="rviz2" output="screen"
        args="-d $(var rviz_config_path)"/>

  <node pkg="car_py_pkg" exec="movement_node"
        output="screen"
  />

  <node pkg="car_py_pkg" exec="gps_xyz_node"
        output="screen"
  />

  <node pkg="car_py_pkg" exec="imu_monitor_node"
        output="screen"
  />

</launch>